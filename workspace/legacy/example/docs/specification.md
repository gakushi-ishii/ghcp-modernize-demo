# 在庫管理システム 仕様書

## 概要

VBScript で実装された在庫管理システムです。CSV ファイルベースでデータを管理し、入庫・出庫処理、在庫不足アラート、レポート出力機能を提供します。

## 機能一覧

### 1. 在庫データ読み込み
- `data/inventory.csv` から在庫データを読み込む
- CSV 形式: 商品コード,商品名,現在庫数,最低在庫数（閾値）,単価

### 2. 入庫・出庫処理
- 入庫: 指定した商品の在庫数を増加
- 出庫: 指定した商品の在庫数を減少
- 出庫時、在庫不足の場合はエラーメッセージを表示

### 3. 在庫不足アラート
- 現在庫数が最低在庫数（閾値）以下の商品を検出
- アラート対象商品の一覧を表示

### 4. 在庫レポート出力
- 全商品の在庫状況を一覧表示
- 在庫金額（現在庫数 × 単価）を計算
- 合計在庫金額を算出

## データ構造

### inventory.csv（在庫マスタ）
| フィールド | 型 | 説明 |
|------------|------|------|
| 商品コード | 文字列 | 商品を一意に識別するコード |
| 商品名 | 文字列 | 商品の名称 |
| 現在庫数 | 数値 | 現在の在庫数量 |
| 最低在庫数 | 数値 | 在庫アラートの閾値 |
| 単価 | 数値 | 商品1個あたりの価格 |

### transactions.csv（入出庫履歴）
| フィールド | 型 | 説明 |
|------------|------|------|
| 日時 | 文字列 | 処理日時 (YYYY/MM/DD HH:MM:SS) |
| 商品コード | 文字列 | 対象商品のコード |
| 処理種別 | 文字列 | IN（入庫）または OUT（出庫） |
| 数量 | 数値 | 入出庫数量 |

## コマンド

システムは以下のコマンドで操作します：

```
cscript //nologo inventory.vbs <コマンド> [引数...]
```

### コマンド一覧
| コマンド | 引数 | 説明 |
|----------|------|------|
| list | なし | 全商品の在庫一覧を表示 |
| in | 商品コード 数量 | 入庫処理（在庫増加） |
| out | 商品コード 数量 | 出庫処理（在庫減少） |
| alert | なし | 在庫不足アラートを表示 |
| report | なし | 在庫レポートを出力 |

## ビジネスロジック

### 在庫計算ルール
1. 入庫: 新在庫数 = 現在庫数 + 入庫数量
2. 出庫: 新在庫数 = 現在庫数 - 出庫数量
3. 出庫時、出庫数量 > 現在庫数 の場合は処理不可

### 在庫アラート条件
- 現在庫数 <= 最低在庫数 の商品をアラート対象とする

### 在庫金額計算
- 在庫金額 = 現在庫数 × 単価
- 合計在庫金額 = 全商品の在庫金額の合計

## エラー処理

| エラー種別 | メッセージ |
|------------|------------|
| コマンド不正 | 「使用方法: ...」を表示 |
| 商品コード不正 | 「商品が見つかりません」 |
| 在庫不足 | 「在庫が不足しています（現在庫: XX）」 |
| ファイル読込エラー | 「ファイルの読み込みに失敗しました」 |
