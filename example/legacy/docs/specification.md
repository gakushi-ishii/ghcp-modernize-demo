# 在庫管理システム — 入出力仕様

## 1. 入力ファイル

### 1.1 在庫マスタ (`data/inventory.dat`)

固定長テキストファイル。1 レコード 1 行。

| フィールド | 型 | 桁数 | 説明 |
|---|---|---|---|
| product_id | 英数字 | 10 | 商品ID（例: PROD001） |
| product_name | 英数字 | 20 | 商品名 |
| quantity | 数値 | 5 | 現在庫数 |
| unit_price | 数値 | 9 (7+小数2) | 単価（小数点なし格納） |
| threshold | 数値 | 5 | 在庫アラート閾値 |

#### サンプルデータ

| product_id | product_name | quantity | unit_price | threshold |
|---|---|---|---|---|
| PROD001 | Notebook PC | 150 | 150000.00 | 10 |
| PROD002 | Mouse | 500 | 2500.00 | 50 |
| PROD003 | Keyboard | 300 | 4500.00 | 30 |
| PROD004 | Monitor | 20 | 35000.00 | 5 |
| PROD005 | USB Cable | 1000 | 800.00 | 100 |

### 1.2 トランザクション (`data/transactions.dat`)

固定長テキストファイル。1 レコード 1 行。

| フィールド | 型 | 桁数 | 説明 |
|---|---|---|---|
| product_id | 英数字 | 10 | 対象商品ID |
| type | 英数字 | 3 | 処理種別: `ADD`(入庫) / `SUB`(出庫) |
| quantity | 数値 | 5 | 処理数量 |

#### サンプルデータ

| product_id | type | quantity |
|---|---|---|
| PROD001 | ADD | 20 |
| PROD002 | SUB | 100 |
| PROD003 | ADD | 50 |
| PROD004 | SUB | 3 |
| PROD006 | ADD | 10 |

## 2. 出力

### 2.1 コンソール出力

各処理ステップの結果をコンソールに表示する。

- 在庫読み込み完了メッセージ（件数）
- 各トランザクションの処理結果
  - 入庫成功: `Stock in: <product_id> +<quantity>`
  - 出庫成功: `Stock out: <product_id> -<quantity>`
  - 在庫不足エラー: `ERROR: Insufficient stock <product_id>`
  - 商品未登録エラー: `ERROR: Product not found <product_id>`
- 在庫不足アラート（閾値以下の商品）
- アラート対象件数

### 2.2 レポートファイル (`output/report.txt`)

在庫一覧レポートをテキストファイルに出力する。

- ヘッダー行
- 商品ごとの在庫情報（ID、名前、数量、単価、在庫金額）
- 合計在庫金額

## 3. ビジネスロジック

### 3.1 入庫処理

- 指定商品の在庫数に、トランザクションの数量を**加算**する
- 商品が存在しない場合はエラーを出力する

### 3.2 出庫処理

- 指定商品の在庫数から、トランザクションの数量を**減算**する
- **在庫数 < 出庫数量** の場合は処理を行わず、エラーを出力する
- 商品が存在しない場合はエラーを出力する

### 3.3 在庫不足アラート

- 全商品を走査し、**在庫数 ≦ 閾値** の商品をアラート対象とする
- アラート対象の商品名・現在庫数・閾値を表示する

### 3.4 在庫金額計算

- 各商品: `在庫金額 = 在庫数 × 単価`
- 合計: 全商品の在庫金額の総和
